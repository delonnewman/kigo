#!/usr/bin/env ruby
require_relative '../lib/kigo'

if ARGV.count == 1
  Kigo.eval_file(ARGV.first)
else
  env = Kigo::Environment.top_level
  loop do
    print "kigo> "
    str = gets.chomp
    if str == 'exit'
      exit 1
    else
      begin
        result = Kigo.eval_string(str, env)
        puts "=> #{result.inspect}"
      rescue Kigo::RuntimeError => e
        puts "#{e.class}: #{e.message}"
      end
    end
  end
end